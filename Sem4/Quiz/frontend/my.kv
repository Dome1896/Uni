#:kivy 1.0.9
ScreenManager:
    LoginWindow:
    MainWindow:
    AddQuestionsWindow:
    QuizWindow:

<MainWindow>:
    name: "main"
    FloatLayout:
        canvas.before:
            Color:
                rgba: 5/255,0/255,25/255,1
            Rectangle:
                pos: self.pos
                size:self.size
        Image:
            source: "logoo.png"
            pos_hint: {"center_x": 0.5, "center_y": 0.75}
            size_hint:( 0.35,0.35)

        Image:
            source: "sb.jpg"
            pos_hint: {"center_y": 0.9}
            size_hint:(0.2,0.2)

        Button:
            pos_hint: {"center_x": 0.5, "center_y": 0.35}
            size_hint:(0.25,0.07)
            background_color: 0,0,0,0
            on_release:
                root.get_all_question()
                app.root.current = "quiz"
                root.manager.transition.direction = "left"
            Image:
                source: "button.png"
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size:(230,230)

        Button:
            pos_hint: {"center_x": 0.5, "center_y": 0.2}
            size_hint:(0.2,0.05)
            background_color: 0,0,0,0
            on_release:
                app.root.current = "addQuestions"
                root.manager.transition.direction = "up"
            Image:
                source: "add_questions.png"
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size:(200,200)   
        Label:
            id: welcome_msg
            font_name: "Impact"
            pos_hint: {"center_x": 0.5, "center_y": 0.42}

        Button:
            pos_hint: {"center_x": 0, "center_y": 0.5}
            size_hint:(0.1,0.1)
            on_release: 
                app.root.current = "login"
                root.manager.transition.direction = "right"
                

<LoginWindow>:
    name: "login"
    FloatLayout:
        canvas.before:
            Color:
                rgba: 5/255,0/255,25/255,1
            Rectangle:
                size: self.size
                pos: self.pos

        FloatLayout:
            pos_hint: {'x': 0, 'y': 0}
            size_hint: 0.35, 1
            canvas.before:
                Color:
                    rgba: (247/255, 247/255 , 247/255, 1)
                Rectangle:
                    size: self.size
                    pos: self.pos

            Label:
                text: "Sign In"
                font_name: "Impact"
                color: (0, 0, 0, 1)
                font_size: 20
                size_hint: None, None
                size: self.texture_size
                pos_hint: {"center_x": 0.5, "y": 0.73}

            TextInput:
                id: username
                hint_text: "Username"
                size_hint: 0.8, None
                height: 40
                pos_hint: {'center_x': 0.5, 'center_y': 0.67}

            TextInput:
                id: password
                hint_text: "Password"
                size_hint: 0.8, None
                height: 40
                pos_hint: {'center_x': 0.5, 'center_y': 0.57}

            Button:
                id: signupButton
                text: "Sign Up"
                size_hint: 0.5, None
                height: 40
                pos_hint: {'center_x': 0.5, 'center_y': 0.1}
                on_release: app.show_register_popup()

            Button: 
                text: "Log In"
                size_hint: 0.5, None
                height: 40
                pos_hint: {'center_x': 0.5, 'center_y': 0.33}
                background_color: 0,0,0,0
                on_release: 
                    root.login()
                    app.root.current = "main"
                    root.manager.transition.direction = "left"
                Image: 
                    source: "arrow-right.png"
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: 70,70



        Image:
            source: "zicke.jpg"
            pos_hint: {"center_x": 0.7, "center_y": 0.6}
            size_hint: (0.45, 0.45)

        Label:
            id: slogan_msg
            text: "Quizy – Intelligente Unterhaltung."
            font_name: "Impact"
            pos_hint: {"center_x": 0.7, "center_y": 0.35}
<PopupRegister>:
    title: "Register"
    size_hint: 0.6, 0.5  # Adjusted size to make it shorter
    auto_dismiss: True
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]  # Added padding for better spacing
        spacing: 15  # Increased spacing between elements
        
        Label:
            text: "Register"
            font_name: "Impact"
            font_size: 24
            pos_hint: {"center_x": 0.5, "y": 0.8}

        TextInput:
            id: username
            hint_text: "Enter Username"
            size_hint: 0.6, None
            height: 40
            pos_hint: {"center_x": 0.5, "y": 0.55}
            multiline: False  # Ensure single-line input

        TextInput:
            id: password
            hint_text: "Enter Password"
            size_hint: 0.6, None
            height: 40
            pos_hint: {"center_x": 0.5, "y": 0.4}
            multiline: False  # Ensure single-line input
            password: True  # Mask the password input

        Button:
            id: addUser
            text: "Sign Up"
            size_hint: 0.4, None
            height: 40
            pos_hint: {"center_x": 0.5}
            on_release: 
                root.reg_user()
                root.dismiss()

        Widget:
            size_hint_y: None
            height: 10  # Add some space at the bottom


<AddQuestionsWindow>:
    name: "addQuestions"
    canvas.before:
        Color:
            rgba: 5/255,0/255,25/255,1
        Rectangle:
            size: self.size
            pos: self.pos
    FloatLayout:
        Image:
            source: "logoo.png"
            pos_hint: {"center_x": 0.5, "center_y": 0.75}
            size_hint:( 0.35,0.35)
        Button:
            pos_hint: {"center_x": 0.5, "center_y": 0.95}
            size_hint:(0.1,0.05)
            on_release: 
                app.root.current = "main"
                root.manager.transition.direction = "down"
        TextInput:
            id: frageTitel_input
            hint_text: "Titel der Frage eingeben"
            pos_hint: {'center_x': 0, 'y': 0}
            opacity: 0
            size_hint: 0.25, 0.1
        TextInput:
            id: frage_input
            hint_text: "Frage eingeben"
            pos_hint: {'center_x': 0.5, 'y': 0.4}
            size_hint: 0.25, 0.1
        TextInput:
            id: antwort_input
            hint_text: "Antwort eingeben"
            pos_hint: {'center_x': 0.5, 'y': 0.23}
            size_hint: 0.25, 0.1

        Button:
            id: generate_or_save_question
            pos_hint: {"center_x": 0.5, "center_y": 0.1}
            #text: "Antwort generieren lassen"
            background_color: 0,0,0,0
            size_hint:(0.1,0.1)
            font_size: 14
            on_release: 
                root.generate_answer(self)
            Image:
                source: "logo_try.jpeg"
                center_x: self.parent.center_x
                center_y: self.parent.center_y
                size: 55,55
        
        Button:
            id: save_question
            pos_hint: {"center_x": 0.8, "center_y": 0.1}
            text: "Frage Speichern"
            size_hint:(0.15,0.1)
            font_size: 14
            on_release: 
                root.save_data(self)

<QuizWindow>:
    name: "quiz"
    canvas.before:
        Color:
            rgba: 5/255,0/255,25/255,1
        Rectangle:
            size: self.size
            pos: self.pos
    FloatLayout:
        Image:
            source: "logoo.png"
            pos_hint: {"center_x": 0.5, "center_y": 0.85}
            size_hint:( 0.2,0.2)
        
        Label:
            id: frageTitel_label
            text: "FrageTitel"
            font_name: "Impact"
            pos_hint: {"center_x": 0.5, "center_y": 0.74}
            font_size: 0
            color: (0,0,0,0)
            halign: "center"
            valign: "middle"
            text_size: self.size       
        Label:
            id: frage_label
            text: "Frage"
            font_name: "Impact"
            pos_hint: {"center_x": 0.5, "center_y": 0.67} 
            font_size: 28 
            halign: "center"
            valign: "middle"
            text_size: self.size 
        Label:
            text: "hier könnte ihre werbung stehen"
            id: perfect_answer_label
            font_name: "Impact"
            pos_hint: {"center_x": 0.5, "center_y": 0.42} 
            font_size: 28 
            halign: "center"
            valign: "middle"
            text_size: self.size 
        
        TextInput:
            id: Quiz_antwort_input
            hint_text: "Antwort eingeben"
            pos_hint: {'center_x': 0.5, 'y': 0.1}
            size_hint: 0.25, 0.1
        Button:
            pos_hint: {"center_x": 0.1, "center_y": 0.05}
            size_hint:(0.1,0.05)
            on_release: 
                app.root.current = "main"
                root.manager.transition.direction = "right"
        Button:
            id: next_question
            text: "next question"
            pos_hint: {"center_x": 0.5, "center_y": 0.05}
            size_hint:(0.1,0.05)
            on_release: 
                root.next_question(self)
        Button:
            id: reveal_answer
            text: "rate answer"
            pos_hint: {"center_x": 0.8, "center_y": 0.05}
            size_hint:(0.1,0.05)
            on_release: 
                root.reveal_answer(self)
            
        Label:
            text: "Erreichte Punktzahl:"
            id: points_label
            font_name: "Impact"
            pos_hint: {"center_x": 0.2, "center_y": 0.82} 
            font_size: 20  
